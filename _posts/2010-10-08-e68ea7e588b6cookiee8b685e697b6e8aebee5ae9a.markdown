---
author: cloga0216
comments: true
date: 2010-10-08 14:58:46+00:00
layout: post
slug: '%e6%8e%a7%e5%88%b6cookie%e8%b6%85%e6%97%b6%e8%ae%be%e5%ae%9a'
title: 控制cookie超时设定
wordpress_id: 548
tags:
- 超时
---

你能控制GATC中的两种cookie过期：session过期和广告系列转化过期。
默认情况下，访问者的session（visit）在30分钟没有活动后过期，因此，如果，在31分钟没有活动后继续浏览你的网站，这个访问者将被计算为回访者。只要他们在后一个session中，没有使用其他的引介来源，那么原始的推介信息将保留。
30分原则是整个网站分析业不成文的标准。但是，有时候你会希望改变这一标准。典型的例子是，你的访问者在一个访问中享受音乐或视频，或者阅读很长的文件。最后的例子是发生的可能性较小，因为访问者通常打印较大的文件，并在线下阅读它们。但是，音乐与视频站是典型的例子，这些站的访问者设置然后遗忘自己的动作，只有当内容完成播放时，才会回到你的网站，并且完成另一个动作。
如果对于一个连续的访问来说，没有活动的时间可能长于30分钟，那么，考虑延长默认的session过期时间，如下所示：
旧的ga.js：
`<script type=”text/javascript”>
var gaJsHost = ((“https:” == document.location.protocol) ? “https://ssl.”: “http://www. “);
document.write(unescape(“%3Cscript src=’” + gaJsHost + “google-analytics.com/ga.js’ type=’text/javascript’%3E%3C/script%3E”));
</script>
<script type=”text/javascript”>
try {
var pageTracker = _gat._getTracker(“UA-12345-1”);
**pageTracker._setSessionCookieTimeout(“3600”);    //延长到1小时**
pageTracker._trackPageview();
} catch(err) {}</script>
`<!-- more -->异步ga.js代码：
`<scripr type=”test/javascript”>
var _gaq=_gaq || [];
_gaq.push([‘_setDomainName’,’none’]);
**_gaq.push([‘_setSessionCookieTimeout’,’3600’]);    //延长到1小时**
_gaq.push([‘_trackPageciew’]);
(function() {
var ga=document.creatElement(‘script’;ga.type=’test/javascript’;ga.async=true;
ga.src=(’https:’==document.location.protocol ? ‘https://ssl’ : ‘http://www’) + ’.google-analytics.com/ga.js’;
var s=document.getElementByTagName(‘script’)[0];
s.paretNode.insertBefore(ga,s);
})();
</script>
`**注：**在Google Analytics中，时间以秒计算。因此，30分钟=1800秒，1小时=3600秒，以此类推。
另一个你能调整的cookie过期是Google Analytics判断转化推介的时间长度。默认情况下，6个月后（1576800秒）广告系列转化过期，在这之后，推介cookie（_utmz）失效。例如，当你为联盟支付佣金时，你可能想要缩短这个值。你能通过下面的修改达到这个目的：
旧的ga.js：
`<script type=”text/javascript”>
var gaJsHost = ((“https:” == document.location.protocol) ? “https://ssl.”: “http://www. “);
document.write(unescape(“%3Cscript src=’” + gaJsHost + “google-analytics.com/ga.js’ type=’text/javascript’%3E%3C/script%3E”));
</script>
<script type=”text/javascript”>
try {
var pageTracker = _gat._getTracker(“UA-12345-1”);
**pageTracker._setCampaignCookieTimeout(“2592000”);  //缩短到30天**
pageTracker._trackPageview();
} catch(err) {}</script>
`异步ga.js代码：
`<scripr type=”test/javascript”>
var _gaq=_gaq || [];
_gaq.push([‘_setDomainName’,’none’]);
**_gaq.push([‘_setCampaignCookieTimeout’,’2592000’]);    //缩短到30天**
_gaq.push([‘_trackPageciew’]);
(function() {
var ga=document.creatElement(‘script’;ga.type=’test/javascript’;ga.async=true;
ga.src=(’https:’==document.location.protocol ? ‘https://ssl’ : ‘http://www’) + ’.google-analytics.com/ga.js’;
var s=document.getElementByTagName(‘script’)[0];
s.paretNode.insertBefore(ga,s);
})();
</script>`
广告系列转化过期值也能延长。但是，超过6个月没有太大的意义，因为，原始cookie信息丢失的可能性增加，这使转换推介数据的可靠性降低。见第2章的“使用cookie时影响访问者数据的问题”。
**注：**还有你能控制的第三个cookie过期值：访问者cookie。默认情况下，访问者cookie设置为2年后过期。如果你喜欢，你可以通过在你的GATC中使用下面的设置，修改过期时间：pageTracker._setVisitorCookieTimeout(“63072000000”);（旧的ga.js）或者_gaq.push([‘_setVistorCookieTimeout’,’63072000000’])（异步的ga.js代码）;但是，我不认为改变这个值有什么用，因此，不推荐使用这一函数。
