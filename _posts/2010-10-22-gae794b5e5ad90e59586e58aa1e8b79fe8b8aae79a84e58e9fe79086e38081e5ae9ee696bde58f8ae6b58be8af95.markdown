---
author: cloga0216
comments: true
date: 2010-10-22 23:42:51+00:00
layout: post
slug: ga%e7%94%b5%e5%ad%90%e5%95%86%e5%8a%a1%e8%b7%9f%e8%b8%aa%e7%9a%84%e5%8e%9f%e7%90%86%e3%80%81%e5%ae%9e%e6%96%bd%e5%8f%8a%e6%b5%8b%e8%af%95
title: GA电子商务跟踪的原理、实施及测试
wordpress_id: 608
categories:
- Digital分析
tags:
- 电子商务
---

**[](http://www.cloga.info/wp-content/uploads/2010/10/123.bmp)GA电子商务跟踪的原理及实施
**简而言之，GA的电子商务跟踪是通过后台程序将你方电子商务系统所存储的电子商务信息写入收据页的GATC（跟踪代码）中，从而当访问者访问收据页（订单成功页）时，GA就可以跟踪到相应的电子商务信息。
GA支持客户端数据收集技术捕捉电子商务交易。通过在购买收据页上GATC的一些简单补充，能设置GA来记录交易及产品信息。图1解释了GA电子商务跟踪的基本过程。




![](http://www.cloga.info/wp-content/uploads/2010/10/123.bmp)




图1   GA电子商务跟踪示意图




当访问者提交一个交易/订单时（step1），跟踪开始，网站服务器收到这一信息（step2）。网站服务器通常这一数据传送到数据库服务器进行处理（step3）。这一个过程可能包括向数据库添加信息、验证信用卡，或向客户发送邮件。一旦数据库服务器完成交易的处理，通常为访问者创建一个收据页（订单成功页，step4）。
在这个时候，必须对页面的代码进行适合于GA的修改。在收据页发送给网站服务器之前，数据库服务器必须将关于访问者交易的信息添加到收据页上的GA电子商务页面标签中。
因此，请让你方的技术编写应用程序代码，将交易信息添加到收据页的GA电子商务相应标签中。<!-- more -->
正确的GA电子商务标签应该是这样的：
`<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount','UA-XXXXXX-YY']);
_gaq.push(['_trackPageview']);
_gaq.push(['_addTrans',
'{订单号}', //订单ID –必填
'{联盟}', //联盟或商店名
'{总计}', // 订单总金额 – 必填
'{税}', // 税
'{运费}', // 运费
'{城市}', // 城市
'{省}', // 省、自治区、直辖市
'{国家}' // 国家
]);
//_addItem应调用购物车中的每一个商品，你方的技术需编写应用程序loop购物车中的所有商品，将每一个产品输出为一个_addItem。
_gaq.push(['_addItem',
'{订单号}', // 订单号 – 必填,用于关联交易与订单
'{产品编号}', // 产品编号（SKU） - 必填
'{产品名称}', // 产品名称-建议填写
'{产品类别}', // 类别或版本
'{单价}', // 单价 – 必填
'{数量}' // 数量 – 必填
]);
_gaq.push(['_trackTrans']); //将交易数据提交给GA服务器
</script>
`所有大括号及斜体字必须替换成实际的交易信息。
电子商务的跟踪代码与标准的GA跟踪代码相比，添加了3行GATC代码：
•定义为_addTrans()的交易行，是一个用单引号标记界定的，以逗号分隔开的值的列表。
•定义为_addItem()的产品行，是一个用单引号标记界定的，以逗号分隔开的值的列表。
•调用_trackTrans()函数，发送交易及商品信息到Google Analytics。
这些行在GATC中的顺序很重要，因此，请在收据页上（订单成功页）保持这里的顺序。
一旦，数据库服务器完成处理，它将向网站服务器发送收据页，网站服务器会将收据页返回给访问者（step5）。随着收据页的呈现，浏览器也将加载写有交易信息的GATC代码，这样，GA就可以跟踪到订单号、订单总额、产品名称、产品数量等电子商务信息（step7）。




表1   电子商务跟踪的变量清单




[![](http://www.cloga.info/wp-content/uploads/2010/10/11.bmp)](http://www.cloga.info/wp-content/uploads/2010/10/11.bmp)




**注意：**如果以上变量中的哪一项没有填写，请将变量的单引号留空（没有空格）。
**GA电子商务跟踪的测试
**实施完成后，如果在收据页html源代码中可以看到完整的电子商务标签。同时也可以看到相应发送到GA服务器对图片[http://www.google-analytics.com/__utm.gif](http://www.google-analytics.com/__utm.gif)的N+1+1次请求，在这些请求后携带有相关电子商务信息的utm变量。N是购物车中的商品数，每一次请求携带了一个商品的信息。1是交易信息请求，携带了本次交易的信息。1是常规的GATC请求。那么，表示GA电子商务跟踪实施成功。
