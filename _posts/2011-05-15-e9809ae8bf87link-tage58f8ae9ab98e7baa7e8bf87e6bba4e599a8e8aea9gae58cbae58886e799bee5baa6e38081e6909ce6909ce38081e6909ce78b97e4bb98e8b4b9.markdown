---
author: cloga0216
comments: true
date: 2011-05-15 10:20:39+00:00
layout: post
slug: '%e9%80%9a%e8%bf%87link-tag%e5%8f%8a%e9%ab%98%e7%ba%a7%e8%bf%87%e6%bb%a4%e5%99%a8%e8%ae%a9ga%e5%8c%ba%e5%88%86%e7%99%be%e5%ba%a6%e3%80%81%e6%90%9c%e6%90%9c%e3%80%81%e6%90%9c%e7%8b%97%e4%bb%98%e8%b4%b9'
title: 通过link tag及高级过滤器让GA区分百度、搜搜、搜狗付费推广
wordpress_id: 1070
categories:
- SEM
tags:
- link tag
---

今天看到[Adiemusy写的一篇Blog](http://yuli.in/seo/webanalytics-%E7%94%A8bdclkid%E5%8C%BA%E5%88%86%E7%99%BE%E5%BA%A6%E4%BB%98%E8%B4%B9%E6%B5%81%E9%87%8F%E5%92%8C%E8%87%AA%E7%84%B6%E6%B5%81%E9%87%8F.html)里提到利用bdclkid做出高级细分，细分出百度付费流量的方法。受到一些启发，给出一个解决百度、soso、搜狗付费与免费流量区分的方案。

其实思路很简单，将来自搜索引擎带有特定标识的流量，标记为付费广告。之前，我曾经一直想要用一段扩展的JS来实现这一过程，但是，苦于找不到一个很好的gb2312转utf-8的JS解决方案，一直搁浅到现在（不知道还要搁浅多久~）。

言归正传，下面讲一下通过Landing page的link tag及高级过滤器来区分百度、搜搜、搜狗付费推广。

1、    通过_addOrganic方法扩展GA对搜索引擎的支持，在_trackPageview方法前添加下面三个方法。

_gaq.push(['_addOrganic','baidu','word']);

_gaq.push(['_addOrganic','soso','w']);

_gaq.push(['_addOrganic','sogou','query']);

2、    在各付费推广网络中的Landing page添加特殊标记。例如添加统一的semsource参数来标识搜索引擎，百度为semsource=baidu，搜搜、搜狗类推。<!-- more -->

3、通过高级过滤器将来自付费广告的流量的来源重写为cpc。

字段A->提取A 引荐链接：(?|&)(semsource)=([^&]*)

字段B->提取字段B 广告系列来源：baidu、soso、sogou

输出至->构造器广告系列媒介：cpc

简单说一下，这种方法与使用utm标记付费来源的优劣。

首先，这种方法获得是搜索词，而不是出价词，从这个角度来说，要比获得出价词信息的utm方法更有价值；

其次，通过高级过滤器重写媒介，只会作用于Landing page中带有参数标识的访问。而不是写在_utmz cookie中，即当来自付费推广的访问者，第二次通过直接输入网址访问网站时，其媒介仍为organic。在这方面，这种方法不如使用utm标记。

第三，这种方法是利用GA自身的机制从referrer获取搜索词，SEM人员不需要标记每个关键词，因此只需要指定创意的Landing page，这些是对百度来说，搜搜、搜狗的推广实在是不方便。同时，关键词换组或计划也不需要改换link tag。因此，在简化操作及灵活性方面，这种方法优于使用utm标记。

第四，这种方法对于同一搜索词可能触发多个计划、多单元的多个关键词（比如，分地域投放类似关键词的账户），或测试广告与关键词组合的效果的情况，几乎没有分辨能力。因此，在分辨力方面，这种方法不如utm标记，但是，这些是由于本身使用的link tag参数有限，可以通过添加额外的link tag来标示campaign及content来增强这种方法的分辨力。

对于第一点和第二点，通过在Landing page上用JS将搜索词数据写入utm_term参数是一个比较理想的方法，但是，由于其中涉及到比较麻烦的字符编码问题，一直未找到比较好的解决方案，如果您知道的话，请给我留言。
