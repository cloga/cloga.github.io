---
author: cloga0216
comments: true
date: 2012-02-12 02:35:56+00:00
layout: post
slug: '%e5%9f%9f%e8%ae%be%e7%bd%ae-google%e7%bd%91%e7%ab%99%e4%bc%98%e5%8c%96%e5%b7%a5%e5%85%b7%e5%ae%b9%e6%98%93%e8%a2%ab%e5%bf%bd%e8%a7%86%e7%9a%84%e4%b8%80%e4%b8%aa%e8%ae%be%e7%bd%ae'
title: 域设置-Google网站优化工具容易被忽视的一个设置
wordpress_id: 1402
categories:
- Digital分析
tags:
- 域哈希
- 网站优化工具
---

[Google网站优化工具](https://www.google.com/analytics/siteopt)是Google提供一个免费的网站测试工具。使用这个工具可以方便的进行A/B Test（通过重定向）和多变量测试（通过动态输出内容）。Google网站优化工具主要包含三段脚本，控制脚本、跟踪脚本和转化脚本。其中跟踪脚本和转化脚本其实就是GA的跟踪代码。

既然是GA的跟踪代码就需要注意域哈希的设置，但是，在Google网站优化工具给出的默认代码中，一般都不包括域哈希的设置（貌似也没有相关说明）。

那么，如果网站原来已经使用了GA进行跟踪并且对域设置进行了一些操作，比如说指定了主域，而GWO中则没有指定主域，会出现什么状况呢？

考虑下面的情景：<!-- more -->

你在网站的首页上进行A/B Test，网站上使用了GA跟踪，并且使用setDomainName指定了主域(.XXX.com)。而GWO的跟踪代码使用的是系统给出的默认代码，没有指定主域。GA在GWO的代码前面。

一个访问者Landing到首页上，首先运行GA代码，将访问信息写入cookie，再运行GWO，由于两组代码使用的cookie相同，同时域哈希值不同~GWO会重新写入一次cookie。这时看不到太多的异常，因为，只会表现为GWO的新访比例高~而我们又不能查看GWO的新访。访问者接着点击网站的其他页面，其他的页面上只有指定了域的GA代码，同样需要进行域哈希值的比对，由于域哈希值不一致，GA会重写所有的cookie，将这个页面作为Landing page，然后这是一次直接访问。至此，一次PV为2的访问由于域哈希值的变化成为2次。如果访问者再回到首页，由于域哈希的不一致，则还会被认为是Direct的新访。

如果访客不是Landing在首页上，那么，访客cookie中的域哈希值为GA的域哈希，但是，只要接触到GWO的代码，域哈希值变化，仍然会被认为是Direct处理。

GWO在GA的前面时的表现会略有不同。

综上，由于域设置的不一致，会造成GA数据的异常，会表现为访问量激增、交互下降，新访激增，大部分转化被归属为直接访问。

其实，这种域设置不一致造成的GA数据异常，不仅仅出现在按照默认方式部署GWO的情况下，只要页面使用两套GA代码都有可能出现。

这个问题的解决其实很简单，就是保证域设置的一致，比如，网站上使用的GA指定了主域，则GWO也应对应指定主域，如果GA关闭了域哈希，则GWO也应关闭域哈希。毕竟，GWO的跟踪脚本和转化脚本其实就是GA的代码而已。

好了，我的这个问题就介绍到这里，如果您有关于GWO或者GA的域哈希值的任何问题，欢迎给我留言~
