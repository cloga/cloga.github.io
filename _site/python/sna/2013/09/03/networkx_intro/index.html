
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="ujianVerification" content="fbba4ee9b28ec33f11f17698ddc55b92" />
    <link rel="stylesheet" href="/pygments.css">
    <title>复杂网络程序包NetworkX简介</title>
    
    <meta name="author" content="Cloga Chen">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="/assets/themes/bootstrap/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  
    <!--[if lt IE 9]>
      <script src="/assets/themes/bootstrap/resources/respond/Respond.min.js"></script>
    <![endif]-->

    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">
    <script>
      dataLayer = [];
    </script>
  </head>

  <body>
    <nav class="navbar navbar-default" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">Cloga的互联网笔记</a>
        </div>

        <div class="collapse navbar-collapse navbar-ex1-collapse">
          <ul class="nav navbar-nav">
            
            
            


  
    
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/pages.html">Pages</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  



          <li><a href="/about.html">关于Cloga</a></li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="container">
      
<div class="page-header">
  <h1>复杂网络程序包NetworkX简介 </h1>
</div>
<div class="row post-full">
  <div class="col-md-12">
    <div class="date">
      <span>03 September 2013</span>
    </div>
    <div class="content">
      <p><a href="http://networkx.github.io/">NetworkX</a>是Python中的一个复杂网络的程序包。从其<a href="http://networkx.github.com/documentation/latest/_downloads/networkx_reference.pdf">文档手册</a>中可以看到，它提供以下功能：从多种数据源读写图；支持图的线性代数计算；基础的绘图功能；经典的复杂网络算法等。</p>

<p>在Python中引入networkx：</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">networkx</span> <span class="kn">as</span> <span class="nn">nx</span>
</code></pre></div>
<p>nx是官方推荐的缩写方式，当然你也可以使用networkx的全拼</p>

<p>NetworkX中支持四种图。按照边是否有方向，两个节点间是否允许多条边两个维度，分为Graph（无向图），MultiGrpah（复合无向图），DiGrpah（有向图），MultiDiGraph（复合有向图）。</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
<span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>
<span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">MultiGraph</span><span class="p">()</span>
<span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">MultiDiGraph</span><span class="p">()</span>
</code></pre></div>
<p>以上就是创建四类图的示例。在networkx中Graph是基本的数据结构，networkx提供的许多方式的input或output都是Graph。以下的示例都以无向图为例。&lt;!-- more --&gt;</p>

<p>在networkx中，Graph是一堆节点与边的组合。 Graph内部使用的是嵌套的字典来表示节点间的关系。我们可以通过add<em>node和add</em>edge来添加节点与边。如果通过add_edge添加了不存在的node，那么这个networkx会自动添加这个node。</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">G</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="s">&#39;B&#39;</span><span class="p">)</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">,</span><span class="s">&#39;C&#39;</span><span class="p">)</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s">&#39;D&#39;</span><span class="p">)</span>
</code></pre></div>
<p>以上就构建了有四个节点，两条边的无向图。通过adj属性，可以看到networkx中对这个图的表示。</p>
<div class="highlight"><pre><code class="language-python" data-lang="python">    <span class="n">G</span><span class="o">.</span><span class="n">adj</span>

    <span class="p">{</span><span class="s">&#39;A&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;B&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;color&#39;</span><span class="p">:</span> <span class="s">&#39;red&#39;</span><span class="p">,</span> <span class="s">&#39;weight&#39;</span><span class="p">:</span> <span class="mf">0.84</span><span class="p">,</span> <span class="s">&#39;size&#39;</span><span class="p">:</span> <span class="mi">300</span><span class="p">}},</span> <span class="s">&#39;C&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;B&#39;</span><span class="p">:</span> <span class="p">{}},</span> <span class="s">&#39;B&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;A&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;color&#39;</span><span class="p">:</span> <span class="s">&#39;red&#39;</span><span class="p">,</span> <span class="s">&#39;weight&#39;</span><span class="p">:</span> <span class="mf">0.84</span><span class="p">,</span> <span class="s">&#39;size&#39;</span><span class="p">:</span> <span class="mi">300</span><span class="p">},</span> <span class="s">&#39;C&#39;</span><span class="p">:</span> <span class="p">{}},</span> <span class="s">&#39;D&#39;</span><span class="p">:</span> <span class="p">{}}</span>
</code></pre></div>
<p>可以看到第一层的字典的key是每个节点，value则是与其相邻的节点，第二层的字典的key是临近节点，value是edge的属性，同样也是一个字典。</p>

<p>networkx也提供了批量添加node和edge的方法。</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">G</span><span class="o">.</span><span class="n">add_nodes_from</span><span class="p">(</span><span class="s">&#39;ABCD&#39;</span><span class="p">)</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([(</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="s">&#39;B&#39;</span><span class="p">),(</span><span class="s">&#39;B&#39;</span><span class="p">,</span><span class="s">&#39;C&#39;</span><span class="p">)])</span>
</code></pre></div>
<p>以上两行命令就为G添加4个节点和两条边，批量添加时参数需为可循环的元素，比如字符串，列表等。</p>

<p>除了基本的属性外，节点和边也可以指定其他的属性，比如指定节点的大小、颜色和位置，边的权重颜色等，这些属性主要是用于网络图。</p>

<p>属性既可以在添加节点和边时指定，也可以在添加了节点和边之后再单独指定。</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s">&#39;E&#39;</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s">&#39;red&#39;</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s">&#39;E&#39;</span><span class="p">)</span>
<span class="n">G</span><span class="o">.</span><span class="n">node</span><span class="p">[</span><span class="s">&#39;E&#39;</span><span class="p">][</span><span class="s">&#39;color&#39;</span><span class="p">]</span><span class="o">=</span><span class="s">&#39;red&#39;</span>
<span class="n">G</span><span class="o">.</span><span class="n">node</span><span class="p">[</span><span class="s">&#39;E&#39;</span><span class="p">][</span><span class="s">&#39;size&#39;</span><span class="p">]</span><span class="o">=</span><span class="mi">10</span>
</code></pre></div>
<p>以上的两种方式都会为G添加E节点，并为E节点添加两个属性color和size。同理也可以为边增加任意的属性。</p>

<p>NetworkX也提供了复杂网络的重要指标的计算，比如每个节点的度，出度，入度，度中心性，图的直径等等，<a href="http://networkx.github.io/documentation/development/reference/algorithms.html">networkx支持的完整指标列表</a>。</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">nx</span><span class="o">.</span><span class="n">number_of_nodes</span><span class="p">(</span><span class="n">G</span><span class="p">)</span><span class="c">##节点数</span>
<span class="n">nx</span><span class="o">.</span><span class="n">number_of_edges</span><span class="p">(</span><span class="n">G</span><span class="p">)</span><span class="c">##边数</span>
<span class="n">nx</span><span class="o">.</span><span class="n">betweenness_centrality</span><span class="p">(</span><span class="n">G</span><span class="p">)</span><span class="c">##返回每个节点的中介中心性</span>
<span class="n">nx</span><span class="o">.</span><span class="n">degree</span><span class="p">(</span><span class="n">G</span><span class="p">)</span><span class="c">##返回每个节点的度</span>
</code></pre></div>
<p>除了这些复杂网络的基本指标之外， networkx还提供<a href="http://networkx.github.io/documentation/development/reference/drawing.html">布局（layout）</a>的计算。</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">pos</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">spring_layout</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>
</code></pre></div>
<p>以上就可以为G计算spring布局时每个节点的位置，返回的是一个字典，Key是节点的标识符，Value是一个元组，元素是X轴和Y轴对应的坐标。</p>

<p>Networkx提供了与多种数据源进行交互的方式，比如，我们可以将networkx中的图输出为不同格式的数据，比如JSON，GEXF等等。</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">nx</span><span class="o">.</span><span class="n">write_gexf</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="s">&quot;test.gexf&quot;</span><span class="p">)</span>
</code></pre></div>
<p>GEXF是Gephi的文件支持，并可以直接用于Sigma.js，市面上的社交网络传播图多数都是用这个可视化框架。</p>

<p>NetworkX自身也提供一些简单的可视化功能，参见文档的<a href="http://networkx.github.io/documentation/development/reference/drawing.html">Drawing</a>部分。NetworkX的官方应用样例请参考<a href="http://networkx.github.io/documentation/latest/gallery.html">gallery</a>。</p>

<p>PS : Wunderman|Agenda的PMC Team正在不断壮大，如果您对Digital Analytics感兴趣，欢迎与我联系（Base在北京）。</p>

    </div>

    
      <ul class="tag_box inline">
        <li><i class="icon-folder-open"></i></li>
        
        


  
     
    	<li><a href="/categories.html#python-ref">
    		python <span>17</span>
    	</a></li>
     
    	<li><a href="/categories.html#sna-ref">
    		sna <span>4</span>
    	</a></li>
    
  


      </ul>
    

    
      <ul class="tag_box inline">
        <li><i class="icon-tags"></i></li>
        
        


  
     
    	<li><a href="/tags.html#networkx-ref">networkx <span>1</span></a></li>
     
    	<li><a href="/tags.html#复杂网络-ref">复杂网络 <span>1</span></a></li>
    
  



      </ul>
    

    <hr>
    
    <ul class="pagination">
      
        <li class="prev"><a href="/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6/2013/05/19/introofdatasciece" title="数据科学简介">&larr; 上一页</a></li>
      
        <li><a href="/archive.html">归档列表</a></li>
      
        <li class="next"><a href="/python/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6/2013/09/17/pandas_intro" title="Python中的结构化数据分析利器-Pandas简介">下一页 &rarr;</a></li>
      
    </ul>
    <hr>
    <!-- Paste the 3 next lines where you want the sharing button(s) to appear -->
    <div class="post-sharing">
     


  <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
	<span class="jiathis_txt">分享到：</span>
	<a class="jiathis_button_tools_1"></a>
	<a class="jiathis_button_tools_2"></a>
	<a class="jiathis_button_tools_3"></a>
	<a class="jiathis_button_tools_4"></a>
	<a href="http://www.jiathis.com/share?uid=1654363" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a>
	<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript">
var jiathis_config = {data_track_clickback:'true'};
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1343300786690926" charset="utf-8"></script>
<!-- JiaThis Button END -->



    </div>    
    <div class="post-comments">
    


  <!-- UJian Button BEGIN -->
<div class="ujian-hook"></div>
<script type="text/javascript">var ujian_config = {num:12,picSize:84,textHeight:45};</script>
<script type="text/javascript" src="http://v1.ujian.cc/code/ujian.js?uid=1654363"></script>
<a href="http://www.ujian.cc" style="border:0;"><img src="http://img.ujian.cc/pixel.png" alt="友荐云推荐" style="border:0;padding:0;margin:0;" /></a>
<!-- UJian Button END -->
<!-- UY BEGIN -->
<div id="uyan_frame"></div>
<script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=1654363"></script>
<!-- UY END -->



    </div>
  </div>
</div>


      <hr>
      <footer>
        <p>
          &copy; 2014 Cloga Chen
          <span class="pull-right text-muted">
            powered by
            <a href="http://jekyll-bootstrap-3.github.io" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll-Bootstrap-3</a>
            and <a href="http://getbootstrap.com" target="_blank">Twitter Bootstrap 3.0.3</a>
          </span>
        </p>
      </footer>
    </div>

    
    <script src="/assets/themes/bootstrap/resources/jquery/jquery.min.js"></script>
    <script src="/assets/themes/bootstrap/resources/bootstrap/js/bootstrap.min.js"></script>
<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-7VF4"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-7VF4');</script>
<!-- End Google Tag Manager -->


  </body>
</html>

